var e=(e,t,l)=>new Promise(((a,o)=>{var r=e=>{try{u(l.next(e))}catch(t){o(t)}},n=e=>{try{u(l.throw(e))}catch(t){o(t)}},u=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,n);u((l=l.apply(e,t)).next())}));import{aw as t,h as l,n as a,p as o,V as r,r as n,o as u,a4 as d,a2 as c,a3 as i,a5 as s,ar as p,i as m,j as _,k as f,l as h,H as v,J as b,z as g,al as j,a6 as y,a0 as V,d as P,as as C,at as k,am as w,ax as A,au as S,av as F}from"./vendor.05f34d32.js";/* empty css               *//* empty css                *//* empty css                 */import{g as U}from"./mda.42d5d9f2.js";import{g as L}from"./contractor.cf9a5938.js";import{g as x}from"./lga.3cbdc0f7.js";import{g as E}from"./state.6b38f1fb.js";import{i as M,_ as O}from"./index.d74d9965.js";import{g as I}from"./sector.18059a04.js";import{a as B,_ as G}from"./delete.f370c029.js";const D=t({name:"Edit"}),T={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Y=[o("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),o("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1)];var q=B(D,[["render",function(e,t,o,r,n,u){return l(),a("svg",T,Y)}]]);function z(t){return e(this,null,(function*(){return yield M({url:"/projects",method:"post",data:t})}))}const H={class:"dialog-footer"},$=g("Cancel"),R=g(" Create Project ");var J=O({props:{show:Boolean},emits:["close","refresh"],setup(t,{emit:g}){const V=t,P=r({title:"",contractor_id:"",state_id:"",lga_id:"",mda_id:"",budget_amount:"",year:"",sector_id:"",contract_amount:""}),C=n(null),k=n(!1),w=r({title:[{required:!0,message:"Please enter the project title"}],budget_amount:[{required:!0,message:"Please enter the budget amount"}],contract_amount:[{required:!0,message:"Please enter the budget amount"}]}),A=n([]),S=n([]),F=n([]),M=n([]),O=n([]);function B(t){return e(this,null,(function*(){const{data:e}=yield x(P.state_id);M.value=e}))}function G(){return e(this,null,(function*(){try{const e=h(C);if(!e)return;yield e.validate((e=>{e&&(k.value=!0,z(P).then((()=>{D()})))})).finally((()=>{k.value=!1}))}catch(e){}}))}function D(){P.budget_amount="",P.contract_amount="",P.title="",P.year="",g("close"),g("refresh")}return u((()=>e(this,null,(function*(){yield function(){return e(this,null,(function*(){const{data:e}=yield U();A.value=e;const{data:t}=yield L();S.value=t;const{data:l}=yield E();F.value=l;const{data:a}=yield x();M.value=a;const{data:o}=yield I();O.value=o}))}()})))),(e,t)=>{const r=j,n=d,u=c,g=i,U=s,L=y,x=p;return l(),m(x,{modelValue:V.show,"onUpdate:modelValue":t[9]||(t[9]=e=>V.show=e),title:"Create Project"},{default:_((()=>[f(U,{ref_key:"validateForm",ref:C,model:h(P),rules:h(w),"label-width":"auto","label-position":"top"},{default:_((()=>[f(n,{prop:"projectTitle",label:"Project Title"},{default:_((()=>[f(r,{modelValue:h(P).title,"onUpdate:modelValue":t[0]||(t[0]=e=>h(P).title=e),placeholder:"Enter Project Title"},null,8,["modelValue"])])),_:1}),f(n,{prop:"projectState",label:"Project State"},{default:_((()=>[f(g,{modelValue:h(P).state_id,"onUpdate:modelValue":t[1]||(t[1]=e=>h(P).state_id=e),filterable:"",placeholder:"Pick the State",onChange:B},{default:_((()=>[(l(!0),a(b,null,v(F.value,(e=>(l(),m(u,{key:e.id,label:e.state_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(n,{prop:"projectLGA",label:"Project LGA"},{default:_((()=>[f(g,{modelValue:h(P).lga_id,"onUpdate:modelValue":t[2]||(t[2]=e=>h(P).lga_id=e),filterable:"",placeholder:"Select the LGA"},{default:_((()=>[(l(!0),a(b,null,v(M.value,(e=>(l(),m(u,{key:e.id,label:e.lga_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(n,{prop:"projectYear",label:"Project Year"},{default:_((()=>[f(r,{modelValue:h(P).year,"onUpdate:modelValue":t[3]||(t[3]=e=>h(P).year=e),placeholder:"Enter the Project Year"},null,8,["modelValue"])])),_:1}),f(n,{prop:"projectContractor",label:"Project Contractor"},{default:_((()=>[f(g,{modelValue:h(P).contractor_id,"onUpdate:modelValue":t[4]||(t[4]=e=>h(P).contractor_id=e),filterable:"",placeholder:"Select"},{default:_((()=>[(l(!0),a(b,null,v(S.value,(e=>(l(),m(u,{key:e.id,label:e.contractor_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(n,{prop:"projectBudgetAmount",label:"Project Budget Amount"},{default:_((()=>[f(r,{modelValue:h(P).budget_amount,"onUpdate:modelValue":t[5]||(t[5]=e=>h(P).budget_amount=e),placeholder:"Enter the budget amount"},null,8,["modelValue"])])),_:1}),f(n,{prop:"projectContractAmout",label:"Project Contract Amount"},{default:_((()=>[f(r,{modelValue:h(P).contract_amount,"onUpdate:modelValue":t[6]||(t[6]=e=>h(P).contract_amount=e),placeholder:"Enter the contract amount"},null,8,["modelValue"])])),_:1}),f(n,{prop:"projectMDA",label:"Project MDA"},{default:_((()=>[f(g,{modelValue:h(P).mda_id,"onUpdate:modelValue":t[7]||(t[7]=e=>h(P).mda_id=e),filterable:"",placeholder:"Select the MDA"},{default:_((()=>[(l(!0),a(b,null,v(A.value,(e=>(l(),m(u,{key:e.id,label:e.mda_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(n,{prop:"projectSector",label:"Project Sector"},{default:_((()=>[f(g,{modelValue:h(P).sector_id,"onUpdate:modelValue":t[8]||(t[8]=e=>h(P).sector_id=e),filterable:"",placeholder:"Select the Sector"},{default:_((()=>[(l(!0),a(b,null,v(O.value,(e=>(l(),m(u,{key:e.id,label:e.sector_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),footer:_((()=>[o("div",H,[f(L,{onClick:D},{default:_((()=>[$])),_:1}),f(L,{type:"primary",loading:k.value,onClick:G},{default:_((()=>[R])),_:1},8,["loading"])])])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-deabbb22"]]);const N={props:{show:[Boolean],projectId:[String]},emits:["close","refresh"],setup(t,{emit:l}){const{projectId:a}=V(t),o=r({title:"",contractor_id:"",state_id:"",lga_id:"",mda_id:"",budget_amount:"",year:"",sector_id:"",contract_amount:""}),d=n(null),c=n(!1),i=r({title:[{required:!0,message:"Please enter the project title"}],budget_amount:[{required:!0,message:"Please enter the budget amount"}],contract_amount:[{required:!0,message:"Please enter the budget amount"}]}),s=n([]),p=n([]),m=n([]),_=n([]),f=n([]);function v(){o.budget_amount="",o.contract_amount="",o.title="",o.year="",l("close"),l("refresh")}return u((()=>e(this,null,(function*(){yield function(){return e(this,null,(function*(){const{data:e}=yield U();s.value=e;const{data:t}=yield L();p.value=t;const{data:l}=yield E();m.value=l;const{data:a}=yield x();_.value=a;const{data:o}=yield I();f.value=o}))}()})))),{inputForm:o,closeModal:v,updateExistingProject:function(){return e(this,null,(function*(){try{const e=h(d);if(!e)return;yield e.validate((e=>{e&&(c.value=!0,z(o).then((()=>{v()})))})).finally((()=>{c.value=!1}))}catch(e){}}))},updateLGASelectInput:function(t){return e(this,null,(function*(){const{data:e}=yield x(o.state_id);_.value=e}))},rules:i,isLoading:c,mdaOptions:s,contractorOptions:p,stateOptions:m,lgaOptions:_,sectorOptions:f,validateForm:d}}},K={class:"dialog-footer"},Q=g("Cancel"),W=g(" Update Project ");var X=O(N,[["render",function(e,t,r,n,u,h){const g=j,V=d,P=c,C=i,k=s,w=y,A=p;return l(),m(A,{modelValue:r.show,"onUpdate:modelValue":t[9]||(t[9]=e=>r.show=e),title:"Update Project"},{default:_((()=>[f(k,{ref:"validateForm",model:n.inputForm,rules:n.rules,"label-width":"auto","label-position":"top"},{default:_((()=>[f(V,{prop:"projectTitle",label:"Project Title"},{default:_((()=>[f(g,{modelValue:n.inputForm.title,"onUpdate:modelValue":t[0]||(t[0]=e=>n.inputForm.title=e),placeholder:"Enter Project Title"},null,8,["modelValue"])])),_:1}),f(V,{prop:"projectState",label:"Project State"},{default:_((()=>[f(C,{modelValue:n.inputForm.state_id,"onUpdate:modelValue":t[1]||(t[1]=e=>n.inputForm.state_id=e),filterable:"",placeholder:"Pick the State",onChange:n.updateLGASelectInput},{default:_((()=>[(l(!0),a(b,null,v(n.stateOptions,(e=>(l(),m(P,{key:e.id,label:e.state_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),f(V,{prop:"projectLGA",label:"Project LGA"},{default:_((()=>[f(C,{modelValue:n.inputForm.lga_id,"onUpdate:modelValue":t[2]||(t[2]=e=>n.inputForm.lga_id=e),filterable:"",placeholder:"Select the LGA"},{default:_((()=>[(l(!0),a(b,null,v(n.lgaOptions,(e=>(l(),m(P,{key:e.id,label:e.lga_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(V,{prop:"projectYear",label:"Project Year"},{default:_((()=>[f(g,{modelValue:n.inputForm.year,"onUpdate:modelValue":t[3]||(t[3]=e=>n.inputForm.year=e),placeholder:"Enter the Project Year"},null,8,["modelValue"])])),_:1}),f(V,{prop:"projectContractor",label:"Project Contractor"},{default:_((()=>[f(C,{modelValue:n.inputForm.contractor_id,"onUpdate:modelValue":t[4]||(t[4]=e=>n.inputForm.contractor_id=e),filterable:"",placeholder:"Select"},{default:_((()=>[(l(!0),a(b,null,v(n.contractorOptions,(e=>(l(),m(P,{key:e.id,label:e.contractor_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(V,{prop:"projectBudgetAmount",label:"Project Budget Amount"},{default:_((()=>[f(g,{modelValue:n.inputForm.budget_amount,"onUpdate:modelValue":t[5]||(t[5]=e=>n.inputForm.budget_amount=e),placeholder:"Enter the budget amount"},null,8,["modelValue"])])),_:1}),f(V,{prop:"projectContractAmout",label:"Project Contract Amount"},{default:_((()=>[f(g,{modelValue:n.inputForm.contract_amount,"onUpdate:modelValue":t[6]||(t[6]=e=>n.inputForm.contract_amount=e),placeholder:"Enter the contract amount"},null,8,["modelValue"])])),_:1}),f(V,{prop:"projectMDA",label:"Project MDA"},{default:_((()=>[f(C,{modelValue:n.inputForm.mda_id,"onUpdate:modelValue":t[7]||(t[7]=e=>n.inputForm.mda_id=e),filterable:"",placeholder:"Select the MDA"},{default:_((()=>[(l(!0),a(b,null,v(n.mdaOptions,(e=>(l(),m(P,{key:e.id,label:e.mda_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(V,{prop:"projectSector",label:"Project Sector"},{default:_((()=>[f(C,{modelValue:n.inputForm.sector_id,"onUpdate:modelValue":t[8]||(t[8]=e=>n.inputForm.sector_id=e),filterable:"",placeholder:"Select the Sector"},{default:_((()=>[(l(!0),a(b,null,v(n.sectorOptions,(e=>(l(),m(P,{key:e.id,label:e.sector_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),footer:_((()=>[o("div",K,[f(w,{onClick:n.closeModal},{default:_((()=>[Q])),_:1},8,["onClick"]),f(w,{type:"primary",loading:n.isLoading,onClick:n.updateExistingProject},{default:_((()=>[W])),_:1},8,["loading","onClick"])])])),_:1},8,["modelValue"])}],["__scopeId","data-v-944cc220"]]);const Z={class:"element-container"},ee=g("Create Project"),te={class:"example-pagination-block"};var le=O({setup(t){const d=n(!1),c=n(!1),i=n([]),s=r({pageCount:0,currentPage:0}),p=r({per_page:100,page:1}),v=n(""),b=n({}),g=P((()=>i.value.filter((e=>!v.value||e.contractor_name.toLowerCase().includes(v.value.toLowerCase()))))),j=n(!1),V=(t,l)=>e(this,null,(function*(){yield function(t){return e(this,null,(function*(){yield function(t){return e(this,null,(function*(){return yield M({url:`/projects/${t}`,method:"delete"})}))}(t)}))}(l.id),yield O()}));function U(t){return e(this,null,(function*(){p.page=t,yield E(p)}))}function L(){return e(this,null,(function*(){yield E(p)}))}function x(){return e(this,null,(function*(){yield E(p)}))}function E(t){return e(this,null,(function*(){try{j.value=!0;const{data:l,meta:a}=yield function(t=null){return e(this,null,(function*(){return yield M({url:"/projects",method:"get",params:t})}))}(t);s.pageCount=a.total,s.currentPage=a.current_page,i.value=l}catch(l){}finally{j.value=!1}}))}function O(){return e(this,null,(function*(){yield E(p)}))}return u((()=>e(this,null,(function*(){yield O()})))),(e,t)=>{const r=y,n=C,u=k,i=w,p=A,v=S;return l(),a("div",Z,[o("div",null,[f(r,{type:"primary",onClick:t[0]||(t[0]=e=>d.value=!0)},{default:_((()=>[ee])),_:1})]),F((l(),m(u,{data:h(g),style:{width:"100%"}},{default:_((()=>[f(n,{label:"Title",prop:"project_title"}),f(n,{label:"State",prop:"project_state.state_name"}),f(n,{label:"Lga",prop:"project_lga.lga_name"}),f(n,{label:"Year",prop:"project_year"}),f(n,{label:"Contractor",prop:"project_contractor.contractor_name"}),f(n,{label:"Budget Amount",prop:"project_budget_amount"}),f(n,{label:"Contract Amount",prop:"project_contract_amount"}),f(n,{label:"MDA",prop:"project_mda.mda_name"}),f(n,{label:"Sector",prop:"project_sector.sector_name"}),f(n,{align:"right"},{default:_((e=>[f(r,{size:"small",icon:h(q),type:"default",onClick:t=>{return e.$index,l=e.row,b.value=l,void(c.value=!0);var l}},null,8,["icon","onClick"]),f(r,{size:"small",icon:h(G),type:"danger",onClick:t=>V(e.$index,e.row)},null,8,["icon","onClick"])])),_:1})])),_:1},8,["data"])),[[v,j.value]]),f(i),o("div",te,[f(p,{background:"",layout:"prev, pager, next","page-count":h(s).pageCount,onCurrentPage:h(s).currentPage,"pager-count":100,onCurrentChange:U,onPrevClick:x,onNextClick:L},null,8,["page-count","onCurrentPage"])]),f(J,{show:d.value,onClose:t[1]||(t[1]=e=>d.value=!1),onRefresh:O},null,8,["show"]),f(X,{show:c.value,onClose:t[2]||(t[2]=e=>c.value=!1),projectId:b.value.id,onRefresh:O},null,8,["show","projectId"])])}}},[["__scopeId","data-v-7174c09f"]]);export{le as default};
